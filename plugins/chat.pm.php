<?php//* chat.pm.php - Personal Messages//* Version:   0.4//* Coded by:  cyrilw//* Copyright: FoxRace, http://www.fox-control.declass chat_pm extends FoxControlPlugin {	public function onStartUp() {		$this->registerCommand('pm', 'Sends a personal message to the specific player. $s/pm <login> <message>$s', false);				$this->name = 'PM Chat';		$this->author = 'Cyril';		$this->version = '0.4';	}	public function onCommand($args) {		if($args[2]	 == 'pm') {					$this->instance()->client->query('GetDetailedPlayerInfo', $args[1]);			$CommandAuthor = $this->instance()->client->getResponse();						$this->instance()->client->query('GetPlayerList', 300, 0);			$playerlist = $this->instance()->client->getResponse();			$playerexists = false;			for($i = 0; $i < count($playerlist); $i++) {				if($playerlist[$i]['Login'] == $args[3][0]) {					$playerexists = true;					$this->instance()->client->query('GetDetailedPlayerInfo', $playerlist[$i]['Login']);					$pmplayer = $this->instance()->client->getResponse();				}			}			if($playerexists == true) {				$message = '';				for($i = 1; $i < count($args[3]); $i++) {					$message .= ' '.$args[3][$i];				}				$this->chatToLogin($args[1], '$06f»PM $fff'.$CommandAuthor['NickName'].'$z$s$06f -> $fff '.$pmplayer['NickName'].'$z$s$06f« $ee0'.$message, 'fff', false);				$this->chatToLogin($pmplayer['Login'], '$06f»PM $fff'.$CommandAuthor['NickName'].'$z$s$06f -> $fff '.$pmplayer['NickName'].'$z$s$06f« $ee0'.$message, 'fff', false);			}			else $this->chatToLogin($args[1], 'Error: Player $fff'.$args[3][0].' $f00not found!', 'f00', 'f00');		}	}}?>